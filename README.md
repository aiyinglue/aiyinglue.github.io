# element-starter


## 文件结构说明

```js
.
├── .babelrc
├── .editorconfig
├── .eslintrc.json
├── .gitignore
├── Custom //项目定制目录
├── HH70_String  //编译node.js str2json.js生成的字符串，用于记录字符串更新细节
├── HH70_String.xlsx //CPE 项目的字符串
├── MW40VBeeline.xlsx //MW40 项目的字符串
├── README.md
├── build.js //编译入口文件
├── lib //node字符串处理函数库
├── package.json
├── src  //通用源码问题
├── str2json.js
├── updateHH70.js
├── vendor
├── versionlog.sh
├── webpack.config.js
└── webpack.dll.config.js
```

> A starter kit for Element UI generated by vue-cli

*If you are familiar with [cooking](https://github.com/elemefe/cooking), [here](https://github.com/ElementUI/element-cooking-starter) is a starter generated with it*

## Start

 - Clone or download this repository
 - Enter your local directory, and install dependencies:

``` bash
npm install
```

## Develop

``` bash
# serve with hot reload at localhost:8080
npm run dev
```

## Build

``` bash
# build for production with minification
npm run build
```
## Build vendor

``` bash
# build common vendor js file
# build第三方依赖包命令，生成到./vendor目录下。
# 第三方依赖包没有升级更新的情况不需要再运行此命令，如果需要升级依赖包，运行此命令并提交vendor目录更新到SVN。
npm run build:vendor 
```

### build.js

#### 编译调试命令


`node build 编译类型 项目名 定制名 svn版本号`

* 编译类型:   
  - `b` 本地调试
  - `p` 版本编译

* 项目名:   
  - `HH70` 
  - `HH40` 
  - `MW70,MW71,MW120,MW40等走Excel需求配置表的项目`

* 定制名:   
  - `Generic` 通用版
  - `E1_EE` 
  - `其他`

* svn版本号
  - 

* 本地编译调试实例（本地编译调试svn版本号无效）: 
  * 编译调试HH70通用版:`node build b HH70 Generic` 
  * 编译调试HH70 OrangeEE版:`node build b HH70 E1_EE`

  运行编译调试命令之后，再运行`npm run dev`即可监听当前所编译的定制文件 

* 本地编译调试的编译流程如下：
  1. 拷贝`src`到`webrc`目录
  2. 拷贝`Custom/项目名/Generic`到`webrc`目录
  3. 如果定制名不为`Generic`,则拷贝`Custom/项目名/定制名`目录下的所有文件到`webrc`目录
  4. 编译字符串
  5. webpack build `npm run build`
  6. 拷贝相关文件到www目录


#### 版本发布编译


`node build 编译类型 项目名 定制名 svn版本号`

* 编译类型:   
  - `b` 本地调试
  - `p` 版本编译

* 项目名:   
  - `HH70` 
  - `HH40` 
  - `其他`

* 定制名:   
  - `Generic` 通用版
  - `E1_EE` 
  - `其他`

* svn版本号
  - 如果为可空，则编译最新版本

* 发布编译实例: 
  * 发布编译HH70通用版:`node build p HH70 Generic` 
  * 发布编译HH70 OrangeEE版:`node build p HH70 E1_EE` 

* 发布编译的代码流程如下：
  1. 拷贝`src`到`webrc`目录
  2. 拷贝`Custom/项目名/Generic`到`webrc`目录
  3. 如果定制名不为`Generic`,则拷贝`Custom/项目名/定制名`目录下的所有文件到`webrc`目录
  4. 编译字符串
  5. webpack build `npm run build`
  6. 拷贝www目录到外层目录`../SmartSwReleaseUI\ElementUI`下
    - 如果定制名为`Generic`,则拷贝到`../SmartSwReleaseUI\ElementUI/项目名_rc`
    - 如果定制名不为`Generic`,则拷贝到`../SmartSwReleaseUI\ElementUI/定制名/项目名_rc`

**提交svn**
> 到SmartSwReleaseUI\ElementUI目录下找到刚刚编译好的版本，提交svn



## 更新字符串说明

1. 将翻译回来的总表命名为`HH70_String-2.xlsx`
2. 打开`HH70_String-2.xlsx`确保里面的表明`HH70_all`
3. 运行命令`node updateHH70.js`
4. 将`HH70_String.xlsx`删掉
5. 打开`HH70_String--HH70_String-2.xlsx`将字符串表明命名`HH70_all`
6. 将`HH70_String--HH70_String-2.xlsx`重命名为`HH70_String.xlsx`
7. 将`HH70_String.xlsx`提交到svn